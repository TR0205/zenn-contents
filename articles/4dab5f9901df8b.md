---
title: "ã€Œyarnã¨npmã®æ··åœ¨ & yarn installãŒé…ã™ãã€ã‚’è§£æ¶ˆ"
emoji: "ğŸ‘Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["yarn", "npm"]
published: true
---

# æ¦‚è¦

nodejs ã‚³ãƒ³ãƒ†ãƒŠã®ç«‹ã¡ä¸ŠãŒã‚ŠãŒå¦™ã«é…ã„ãªã¨æ€ã£ãŸã‚‰ã“ã‚“ãªè¡¨ç¤ºã‚’ç™ºè¦‹ã—ãŸã®ã§è§£æ¶ˆ

```
package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
```

è¦ã¯ã€Œnpm ã¨ yarn ãŒæ··åœ¨ã—ã¦ã‚‹ã‚ˆã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼

# ã¾ãšã¯æ··åœ¨ã‚’è§£æ¶ˆ

å˜ç´”ã« package-lock.json ã‚’å‰Šé™¤ã—ã¦ yarn install ã—ã¦ã¿ãŸãŒã ã‚

```
https://registry.npmjs.org/@mui/icons-material/-/icons-material-5.11.16.tgz: Extracting tar content of undefined failed, the file appears to be corrupt: "ENOENT: no such file or directory, chmod '/workspace/.cache/yarn/v6/npm-@mui-icons-material-5.11.16-integrity/node_modules/@mui/icons-material/esm/AirlineStopsSharp.js'"
```

yarn.lock ã‚’å‰Šé™¤ã—ã¦å†åº¦å®Ÿè¡Œ

```
https://registry.yarnpkg.com/@types/node/-/node-20.3.3.tgz: Extracting tar content of undefined failed, the file appears to be corrupt: "ENOENT: no such file or directory, open '/workspace/.cache/yarn/v6/npm-@types-node-20.3.3-329842940042d2b280897150e023e604d11657d6-integrity/node_modules/@types/node/ts4.8/dgram.d.ts'"
```

ã“ã‚Œã§æ··åœ¨ã¯è§£æ¶ˆã§ããŸ

# yarn install ãŒæ¯åº¦é…ã™ãã‚‹ã®ã§è§£æ¶ˆ

ã“ã®è¨˜äº‹ã‚’å‚è€ƒ
https://zenn.dev/tamanugi/articles/6f372d45b85c18
devcontainer å†…ã§ yarn install ã®å®Ÿè¡Œé€Ÿåº¦ãŒã‹ãªã‚Šæ—©ããªã£ãŸ

```Dockerfile
volumes:
  node_modules:

services:
  app:
    build:
      args:
        - NODE_VER=18.16.0-slim
      context: ./docker
      dockerfile: Dockerfile
    tty: true
    volumes:
      - type: bind
        source: ./
        target: workspace
      - type: volume
        source: node_modules
        target: workspace/node_modules
    command: /bin/bash -c "yarn install && yarn dev"
    working_dir: workspace
    ports:
      - 5173:5173
```

## é€”ä¸­ã§ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼

Dockerfile ã® CMD ã§ yarn install ã‚’å®Ÿè¡Œã—ãŸã‚‰ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
çµå±€è§£æ¶ˆã§ããš compose.yml ã® command ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã§å¦¥å”
Dockerfile ã¨ compose.yml ã§ãªãœæ¨©é™ãŒå¤‰ã‚ã‚‹ã®ã ã‚ã†ãƒ»ãƒ»ãƒ»
ãƒ›ã‚¹ãƒˆå†…ã¨ã‚³ãƒ³ãƒ†ãƒŠã§æ¨©é™ãŒç•°ãªã£ãŸã‚Šã™ã‚‹ã‚‰ã—ã„ãŒè§£æ¶ˆã§ããªã‹ã£ãŸ

```
error An unexpected error occurred: "EACCES: permission denied, mkdir '/workspace/app/node_modules/acorn'".
info If you think this is a bug, please open a bug report with the information provided in "/workspace/app/yarn-error.log".
info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.
```

# å‚è€ƒ

- https://qiita.com/Intel0tw5727/items/6f72b3f267e66e40f27f
